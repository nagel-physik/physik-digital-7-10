<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Physik Digital 9‚Äì10</title>
  <style>
    :root {
      --bg-main: radial-gradient(circle at top, #020617 0%, #020617 40%, #000 100%);
      --card-bg: rgba(15, 23, 42, 0.96);
      --border-soft: rgba(148, 163, 184, 0.5);
      --text-main: #e5e7eb;
      --text-muted: #94a3b8;
      --accent-blue: #3b82f6;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: var(--bg-main);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 1.5rem 0.75rem 2.5rem;
    }

    /* Schneelayer */
    #snow-layer {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 2;
      overflow: hidden;
    }

    .page {
      width: 100%;
      max-width: 960px;
      background: radial-gradient(circle at top left, #020617 0%, #020617 40%, #000 100%);
      border-radius: 32px;
      padding: 1.75rem 1.5rem 2rem;
      border: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: 0 32px 80px rgba(15, 23, 42, 0.9);
      position: relative;
      z-index: 3;
    }

    @media (min-width: 720px) {
      .page {
        padding: 2rem 2.4rem 2.4rem;
      }
    }

    header.hero {
      margin-bottom: 1.5rem;
    }

    .brand {
      font-size: 0.78rem;
      letter-spacing: 0.24em;
      text-transform: uppercase;
      color: #9ca3af;
      margin-bottom: 0.75rem;
    }

    h1 {
      font-size: clamp(1.8rem, 4vw, 2.4rem);
      font-weight: 700;
      letter-spacing: 0.03em;
      margin-bottom: 0.3rem;
    }

    .subtitle {
      font-size: 0.92rem;
      color: var(--text-muted);
      max-width: 38rem;
      line-height: 1.5;
    }

    /* Uhr-Balken */
    .clock {
      margin: 1.1rem auto 0;
      max-width: 420px;
      padding: 0.55rem 1.3rem;
      border-radius: 999px;
      background: radial-gradient(circle at top left, #1d4ed8 0%, #0f172a 50%, #020617 100%);
      border: 1px solid rgba(129, 140, 248, 0.7);
      box-shadow: 0 0 30px rgba(59, 130, 246, 0.7);
      display: flex;
      align-items: baseline;
      justify-content: center;
      gap: 0.6rem;
      font-weight: 600;
      font-size: 0.95rem;
      letter-spacing: 0.06em;
      color: #e5f2ff;
      text-shadow: 0 0 12px rgba(15, 23, 42, 0.9);
    }

    .clock-time {
      font-feature-settings: "tnum" 1, "lnum" 1;
      font-size: 1.05rem;
    }

    .clock-sep {
      opacity: 0.7;
    }

    .clock-date {
      font-size: 0.82rem;
      opacity: 0.9;
    }

    /* Hinweis + Aktualisieren */
    .hint {
      margin-top: 1.1rem;
      font-size: 0.9rem;
      color: var(--text-muted);
      max-width: 40rem;
      line-height: 1.5;
    }

    .hint strong {
      color: #e5e7eb;
      font-weight: 600;
    }

    .refresh-row {
      margin-top: 0.8rem;
    }

    .refresh-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.55rem 1.25rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.75);
      background: radial-gradient(circle at top left, #111827 0%, #020617 55%, #000 100%);
      color: #e5e7eb;
      font-size: 0.9rem;
      cursor: pointer;
      box-shadow: 0 14px 30px rgba(15, 23, 42, 0.7);
      transition: transform 0.08s ease, box-shadow 0.12s ease,
        background 0.12s ease, border-color 0.12s ease;
    }

    .refresh-btn span {
      font-size: 1.1rem;
    }

    .refresh-btn:active {
      transform: translateY(1px) scale(0.99);
      box-shadow: 0 6px 16px rgba(15, 23, 42, 0.8);
    }

    /* Kacheln */
    .tiles {
      margin-top: 1.6rem;
      display: flex;
      flex-direction: column;
      gap: 0.9rem;
    }

    .tile {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.9rem 1.3rem;
      border-radius: 999px;
      text-decoration: none;
      color: #0f172a;
      font-weight: 600;
      font-size: 1rem;
      letter-spacing: 0.03em;
      box-shadow: 0 14px 40px rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(15, 23, 42, 0.2);
      overflow: hidden;
    }

    .tile-main {
      display: inline-flex;
      align-items: center;
      gap: 0.55rem;
    }

    .tile-main span.icon {
      font-size: 1.15rem;
    }

    .tile-label {
      text-shadow: 0 0 14px rgba(15, 23, 42, 0.4);
    }

    .tile.k9 {
      background: linear-gradient(135deg, #8b5cf6, #a855f7);
      color: #0f172a;
    }

    .tile.k10 {
      background: linear-gradient(135deg, #fb923c, #f97316);
      color: #0f172a;
    }

    .tile.formel {
      background: linear-gradient(135deg, #facc15, #f59e0b);
      color: #0f172a;
    }

    .tile.ask {
      background: linear-gradient(135deg, #6b7280, #9ca3af);
      color: #020617;
    }

    .tile:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 50px rgba(15, 23, 42, 0.85);
    }

    .tile:active {
      transform: translateY(1px) scale(0.99);
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.8);
    }

    .tile-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.15rem 0.75rem;
      border-radius: 999px;
      border: 1px solid rgba(248, 250, 252, 0.9);
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      background: rgba(15, 23, 42, 0.65);
      color: #f9fafb;
    }

    /* Feedback-Card */
    .feedback-card {
      margin-top: 2rem;
      background: radial-gradient(circle at top left, #020617 0%, #020617 45%, #020617 100%);
      border-radius: 24px;
      padding: 1.35rem 1.3rem 1.4rem;
      border: 1px solid rgba(148, 163, 184, 0.55);
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.9);
    }

    .feedback-card h2 {
      font-size: 1.05rem;
      margin-bottom: 0.35rem;
    }

    .feedback-card p {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 0.75rem;
    }

    .stars {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 0.85rem;
    }

    .star-btn {
      width: 2.4rem;
      height: 2.4rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      background: radial-gradient(circle at top, #020617 0%, #020617 50%, #000 100%);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 1.2rem;
      transition: transform 0.08s ease, box-shadow 0.12s ease,
        border-color 0.12s ease, background 0.12s ease;
    }

    .star-btn span {
      pointer-events: none;
    }

    .star-btn.active {
      border-color: #facc15;
      background: radial-gradient(circle at top, #facc15 0%, #eab308 40%, #0f172a 100%);
      box-shadow: 0 0 20px rgba(250, 204, 21, 0.7);
    }

    .star-btn:active {
      transform: translateY(1px) scale(0.96);
    }

    .feedback-input {
      width: 100%;
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.95);
      color: #e5e7eb;
      padding: 0.7rem 0.85rem;
      font-size: 0.9rem;
      resize: vertical;
      min-height: 2.6rem;
      max-height: 7rem;
      margin-bottom: 0.8rem;
    }

    .feedback-input::placeholder {
      color: rgba(148, 163, 184, 0.8);
    }

    .feedback-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 0.7rem;
      justify-content: space-between;
    }

    .feedback-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.55rem;
      padding: 0.55rem 1.3rem;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 0.9rem;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #022c22;
      font-weight: 600;
      box-shadow: 0 16px 42px rgba(22, 163, 74, 0.75);
      text-decoration: none;
    }

    .feedback-btn span.icon {
      font-size: 1.1rem;
    }

    .feedback-toast {
      font-size: 0.86rem;
      color: #bbf7d0;
      opacity: 0;
      transform: translateY(4px);
      transition: opacity 0.16s ease, transform 0.16s ease;
    }

    .feedback-toast.show {
      opacity: 1;
      transform: translateY(0);
    }

    footer {
      margin-top: 1.6rem;
      font-size: 0.8rem;
      color: #64748b;
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
    }

    footer span {
      white-space: nowrap;
    }

    footer span.sep {
      opacity: 0.4;
    }

    /* Schneeflocken */
    .snowflake {
      position: fixed;
      top: -10px;
      width: 4px;
      height: 4px;
      border-radius: 999px;
      background: rgba(248, 250, 252, 0.95);
      box-shadow: 0 0 8px rgba(241, 245, 249, 0.8);
      opacity: 0.9;
      animation-name: fall;
      animation-timing-function: linear;
      animation-fill-mode: forwards;
    }

    @keyframes fall {
      0% {
        transform: translate3d(0, 0, 0);
        opacity: 0;
      }
      8% {
        opacity: 1;
      }
      100% {
        transform: translate3d(var(--drift, 0px), 105vh, 0);
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <div id="snow-layer"></div>

  <main class="page">
    <header class="hero">
      <div class="brand">FGO PERLEBERG ¬∑ PHYSIK DIGITAL</div>
      <h1>Physik Digital 9‚Äì10</h1>
      <p class="subtitle">
        W√§hle deine Klassenstufe oder die Formelsammlung. Alle Inhalte sind f√ºr
        <strong>Smartphone</strong> &amp; <strong>Smartboard</strong> optimiert.
      </p>

      <div class="clock" id="clockBox">
        <span class="clock-time" id="clockTime">--:--:--</span>
        <span class="clock-sep">‚Ä¢</span>
        <span class="clock-date" id="clockDate">--, --.--.----</span>
      </div>

      <p class="hint">
        <strong>Hinweis:</strong> Wenn du neue Inhalte nicht siehst, tippe auf
        <strong>‚ÄûAktualisieren‚Äú</strong> oder lade die Seite im Browser neu.
      </p>

      <div class="refresh-row">
        <button id="refreshBtn" class="refresh-btn">
          <span>‚ü≥</span>
          <span>Aktualisieren</span>
        </button>
      </div>
    </header>

    <section class="tiles">
      <a href="klasse9.html" class="tile k9">
        <div class="tile-main">
          <span class="icon">9Ô∏è‚É£</span>
          <span class="tile-label">Klasse 9</span>
        </div>
        <span class="tile-badge">NEU</span>
      </a>

      <a href="klasse10.html" class="tile k10">
        <div class="tile-main">
          <span class="icon">üîü</span>
          <span class="tile-label">Klasse 10</span>
        </div>
        <span class="tile-badge">NEU</span>
      </a>

      <a href="formelsammlung.html" class="tile formel">
        <div class="tile-main">
          <span class="icon">∆í</span>
          <span class="tile-label">Formelsammlung 9‚Äì10</span>
        </div>
      </a>

      <a href="mailto:michael.nagel@lk.brandenburg.de?subject=Fragen%20zu%20Physik%20Digital"
         class="tile ask">
        <div class="tile-main">
          <span class="icon">‚úâÔ∏è</span>
          <span class="tile-label">Fragen an die Lehrkraft</span>
        </div>
      </a>
    </section>

    <section class="feedback-card">
      <h2>Wie gef√§llt dir diese App?</h2>
      <p>
        Tippe auf die Sterne und schicke mir anonymes Feedback.
        So kann ich Physik Digital weiter verbessern.
      </p>

      <div class="stars" id="starRow">
        <button type="button" class="star-btn" data-value="1"><span>‚≠êÔ∏è</span></button>
        <button type="button" class="star-btn" data-value="2"><span>‚≠êÔ∏è</span></button>
        <button type="button" class="star-btn" data-value="3"><span>‚≠êÔ∏è</span></button>
        <button type="button" class="star-btn" data-value="4"><span>‚≠êÔ∏è</span></button>
        <button type="button" class="star-btn" data-value="5"><span>‚≠êÔ∏è</span></button>
      </div>

      <textarea
        id="feedbackText"
        class="feedback-input"
        placeholder="Was hat dir geholfen? Was kann besser werden? (optional)"
      ></textarea>

      <div class="feedback-row">
        <a id="feedbackSend" class="feedback-btn" href="#">
          <span class="icon">üìß</span>
          <span>Feedback per Mail senden</span>
        </a>
        <div id="feedbackToast" class="feedback-toast">
          Danke f√ºr dein Feedback!
        </div>
      </div>
    </section>

    <footer>
      <span>Version 1.0</span>
      <span class="sep">¬∑</span>
      <span>Stand: Schuljahr 2025</span>
      <span class="sep">¬∑</span>
      <span>M. Nagel</span>
      <span class="sep">¬∑</span>
      <span>Physik Digital 9‚Äì10</span>
    </footer>
  </main>

  <script>
    // --- Uhr aktualisieren ---
    function updateClock() {
      const now = new Date();
      const h = String(now.getHours()).padStart(2, "0");
      const m = String(now.getMinutes()).padStart(2, "0");
      const s = String(now.getSeconds()).padStart(2, "0");
      const timeEl = document.getElementById("clockTime");
      const dateEl = document.getElementById("clockDate");

      if (timeEl) timeEl.textContent = h + ":" + m + ":" + s;

      const days = ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"];
      const dName = days[now.getDay()];
      const d = String(now.getDate()).padStart(2, "0");
      const mo = String(now.getMonth() + 1).padStart(2, "0");
      const y = now.getFullYear();

      if (dateEl) dateEl.textContent = dName + ", " + d + "." + mo + "." + y;
    }
    setInterval(updateClock, 1000);
    updateClock();

    // --- Refresh-Button ---
    const refreshBtn = document.getElementById("refreshBtn");
    if (refreshBtn) {
      refreshBtn.addEventListener("click", () => {
        window.location.reload();
      });
    }

    // --- NEU-Badges (14 Tage) ---
    (function handleNewBadges() {
      const NEW_DAYS = 14;
      const STORAGE_KEY = "dashboardFirstSeen_v2";
      let firstSeen = localStorage.getItem(STORAGE_KEY);

      if (!firstSeen) {
        localStorage.setItem(STORAGE_KEY, Date.now().toString());
        firstSeen = localStorage.getItem(STORAGE_KEY);
      }

      const diffMs = Date.now() - Number(firstSeen);
      const diffDays = diffMs / (1000 * 60 * 60 * 24);
      const showNew = diffDays <= NEW_DAYS;

      const badges = document.querySelectorAll(".tile-badge");
      badges.forEach((b) => {
        b.style.display = showNew ? "inline-flex" : "none";
      });
    })();

    // --- Winter-Zeit pr√ºfen ---
    function isWinter() {
      const now = new Date();
      const m = now.getMonth(); // 0 = Jan, 11 = Dez
      const d = now.getDate();

      if (m === 10 && d >= 30) return true; // ab 30. November
      if (m === 11) return true;           // Dezember
      if (m === 0 && d <= 31) return true; // Januar
      return false;
    }

    // --- Schneefall aktivieren ---
    (function initSnow() {
      if (!isWinter()) return;

      const snowLayer = document.getElementById("snow-layer");
      if (!snowLayer) return;

      function createFlake() {
        const flake = document.createElement("div");
        flake.className = "snowflake";

        const size = 2 + Math.random() * 3;
        const left = Math.random() * 100;
        const duration = 6 + Math.random() * 6;
        const delay = Math.random() * 2;
        const drift = (Math.random() * 40 - 20).toFixed(1) + "px";

        flake.style.width = size + "px";
        flake.style.height = size + "px";
        flake.style.left = left + "vw";
        flake.style.animationDuration = duration + "s";
        flake.style.animationDelay = delay + "s";
        flake.style.setProperty("--drift", drift);

        snowLayer.appendChild(flake);

        setTimeout(() => {
          if (flake.parentNode === snowLayer) {
            snowLayer.removeChild(flake);
          }
        }, (duration + delay) * 1000 + 500);
      }

      setInterval(() => {
        const burst = 3 + Math.floor(Math.random() * 2);
        for (let i = 0; i < burst; i++) createFlake();
      }, 260);
    })();

    // --- Feedback-Logik ---
    const starButtons = document.querySelectorAll(".star-btn");
    let currentStars = 0;

    starButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const value = Number(btn.getAttribute("data-value"));
        currentStars = value;
        starButtons.forEach((b) => {
          const v = Number(b.getAttribute("data-value"));
          b.classList.toggle("active", v <= value);
        });
      });
    });

    const feedbackText = document.getElementById("feedbackText");
    const feedbackSend = document.getElementById("feedbackSend");
    const feedbackToast = document.getElementById("feedbackToast");

    if (feedbackSend) {
      feedbackSend.addEventListener("click", (e) => {
        e.preventDefault();

        const rating = currentStars || 0;
        const text = (feedbackText && feedbackText.value.trim()) || "";

        const subject = encodeURIComponent("Feedback zu Physik Digital");
        let body = "Bewertung: " + rating + " von 5 Sternen%0D%0A";
        body += "%0D%0A";
        body += encodeURIComponent(text);

        const mailto =
          "mailto:michael.nagel@lk.brandenburg.de?subject=" +
          subject +
          "&body=" +
          body;

        window.location.href = mailto;

        // nach dem Senden zur√ºcksetzen
        currentStars = 0;
        starButtons.forEach((b) => b.classList.remove("active"));
        if (feedbackText) feedbackText.value = "";

        if (feedbackToast) {
          feedbackToast.classList.add("show");
          setTimeout(() => {
            feedbackToast.classList.remove("show");
          }, 2500);
        }
      });
    }
  </script>
</body>
</html>